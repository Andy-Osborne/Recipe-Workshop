{% extends 'public_base.html' %}

{% block title %}RW | Home{% endblock %}

{% block mdescription %}Check out out now to view the latest recipes, upload your own creations and share with others.{% endblock %}


{% block main %}

<div class="container-fluid p-0">
    <div class="row no-gutters">
        <div class="col-12 image-container">
            <div class="image-outer">
                <div class="home-image-inner"></div>
            </div>
            <div class="search-field search-main form-inline text-center">
                <form action="{{url_for('get_search')}}" method="POST">
                    <input class="form-control text-center search-main" type="search" name="search_field"
                        id="search_field" placeholder="Discover your next feast" required>
                    <button class="btn btn-search" type="submit">Search</button>
                </form>
            </div>
        </div>
    </div>
</div>

<section class="container-fluid">
    <div class="row no-gutters">
        <div class="col-12 text-center">
            <h2 class="front-header">Top Rated Recipe</h2>
            <div class="row no-gutters d-flex justify-content-center">
                <div class="col-12 col-8-land col-sm-8 col-md-5 col-lg-4 col-xl-3">
                    {% for dict in favourite %}
                    <div class="featured-container d-flex justify-content-center">
                        <a href="{{url_for('get_recipe',recipe_id=dict['_id'],recipe_name=dict['recipe_name'])}}"><img
                                class="index-image" src="{{dict['recipe_image']}}" alt="{{dict['recipe_name']}}"></a>
                    </div>

                    <a class="header-link" href="{{url_for('get_recipe',recipe_id=dict['_id'],recipe_name=dict['recipe_name'])}}">
                        <div class="front-text p-2">
                            <h4>{{dict["recipe_name"]|title}}</h4>
                            <hr>
                            <p>{{dict["recipe_description"]}}</p>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</section>

<section class="container-fluid">
    <div class="row no-gutters">
        <div class="col-12">
            <h3 class="front-header">Recently Added</h3>
        </div>
        {% for dict in recent %}
        <div class="col-6 col-lg-3">
            <div class="m-2">
                <div class="recent-recipe">
                    <a href="{{url_for('get_recipe',recipe_id=dict['_id'],recipe_name=dict['recipe_name'])}}">
                        <img class="index-image" src="{{dict['recipe_image']}}" alt="{{dict['recipe_name']}}">
                    </a>
                </div>
    
                <div class="front-text text-center recent-text p-1">
                    <h5>{{dict["recipe_name"]|title}}</h5>
                    <hr class="recent-description">
                    <p class="recent-description">{{dict["recipe_description"]}}</p>
                </div>    
            </div>
        </div>
        {% endfor %}
    </div>
</section>


{% if not session["username"] %}

<div class="banner d-flex text-center align-items-center flex-column">
    <div class="newsletter-text">
        <h5>Want the latest tips and recipes direct to your inbox?</h5>
    </div>

    <div class="form-inline">
        <form action="{{url_for('newsletter_register')}}" method="POST" id="newsletter">
            <div class="form-group">
                <input class="form-control text-center" type="email" name="email" id="email" placeholder="Enter your email"
                    required>
                <button class="btn btn-news" type="submit" form="newsletter">Join Now</button>
            </div>
        </form>
        <h2><strong class="message"></strong></h2>
    </div>
</div>

{% elif session["username"] != signups %}

<div class="banner d-flex text-center align-items-center flex-column">
    <div class="newsletter-text">
        <h5>Want the latest tips and recipes direct to your inbox?</h5>
    </div>

    <div class="form-inline">
        <form action="{{url_for('newsletter_register')}}" method="POST" id="newsletter">
            <div class="form-group form-inline">
                <input class="form-control text-center" type="email" name="email" id="email" placeholder="Enter your email"
                    required>
                <button class="btn btn-news" type="submit" form="newsletter">Join Now</button>
            </div>
        </form>
        <h2><strong class="message"></strong></h2>
    </div>
</div>

{% else %}

{% endif %}


{% endblock %}